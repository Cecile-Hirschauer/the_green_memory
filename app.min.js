document.addEventListener("DOMContentLoaded",()=>{const e=[{icon:"üåø",name:"Foug√®re"},{icon:"üçÑ",name:"Champignon"},{icon:"ü¶ä",name:"Renard"},{icon:"üêù",name:"Abeille"},{icon:"üêû",name:"Coccinelle"},{icon:"üåª",name:"Tournesol"},{icon:"üå≤",name:"Sapin"},{icon:"ü¶ã",name:"Papillon"}],t=document.getElementById("game-board"),n=document.getElementById("moves"),a=document.getElementById("live-feedback"),s=document.getElementById("restart-btn"),o=document.getElementById("game-message"),i=12;let c=[],l=[],d=0,r=0,m=!1,u=!1;const f=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},p=e=>{a.textContent=e},g=(e,t="",n=!0)=>{p(e),n&&(o.textContent=e,o.className="game-message"+(t?` ${t}`:""),o.hidden=!1)},h=()=>{o.hidden=!0,o.textContent="",o.className="game-message"},v=()=>{r++,n.textContent=`${r}/${i} coups`,i-r===5?p("Attention, il ne vous reste que 5 coups !"):i-r===2&&p("Plus que 2 coups !")},b=()=>{r=0,d=0,l=[],m=!1,u=!1,n.textContent=`0/${i} coups`,t.innerHTML="",h(),p("Nouvelle partie commenc√©e. √Ä vous de jouer !"),c=f([...e,...e]),c.forEach((e,n)=>{const a=document.createElement("li"),s=document.createElement("button");s.type="button",s.classList.add("card"),s.dataset.name=e.name,s.dataset.index=n,s.setAttribute("aria-label",`Carte ${n+1}, masqu√©e`),s.innerHTML=`<div class="card-inner"><span class="card-front" aria-hidden="true">?</span><span class="card-back" aria-hidden="true">${e.icon}</span></div>`,s.addEventListener("click",()=>{((t,n)=>{u||m||t.classList.contains("flipped")||t.classList.contains("matched")||(((t,n)=>{t.classList.add("flipped"),t.setAttribute("aria-label",`Carte ${parseInt(t.dataset.index,10)+1}, ${n.name}`),l.push({element:t,name:n.name})})(t,n),2===l.length&&(v(),(()=>{m=!0;const[t,n]=l;t.name===n.name?(t.element.classList.add("matched"),n.element.classList.add("matched"),d++,g("Paire trouv√©e !","win"),l=[],m=!1,d===e.length&&(u=!0,setTimeout(()=>{g(`Bravo, vous avez gagn√© en ${r} coups !`,"win"),s.focus()},500))):(g("Pas de correspondance, essayez encore.","lose"),setTimeout(()=>{t.element.classList.remove("flipped"),n.element.classList.remove("flipped"),t.element.setAttribute("aria-label",`Carte ${parseInt(t.element.dataset.index,10)+1}, masqu√©e`),n.element.setAttribute("aria-label",`Carte ${parseInt(n.element.dataset.index,10)+1}, masqu√©e`),h(),l=[],m=!1},1e3)),r>=i&&d<e.length&&(u=!0,setTimeout(()=>{g(`Dommage ! Vous avez utilis√© vos ${i} coups.`,"lose"),s.focus()},1200))})()))})(s,e)}),a.appendChild(s),t.appendChild(a)})};s.addEventListener("click",b),b()});